## How to migrate

To migrate to version 0.2.x of LangChain, we first recommend you take the following steps:

1. install the 0.2.x versions of langchain-core, langchain and upgrade to recent versions of other packages that you may be using (e.g. langgraph, langchain-community, langchain-openai, etc.)
2. Verify that your code runs properly with the new packages (e.g., unit tests pass)
3. Install a recent version of `langchain-cli` , and use the tool to replace old imports used by your code with the new imports. (See instructions below.)
4. Manually resolve any remaining deprecation warnings
5. Re-run unit tests

### langchain-cli migrate

To make it easier to migrate user code off deprecated imports to the new import paths, we’ve provided a migration script.

The migration script is not perfect and has the following known limitations:

1. It’s limited to helping users move from old imports to new imports. It doesn’t help address other deprecations.
2. It can’t handle imports that involve `as` .
3. New imports are always placed in global scope, even if the old import that was replaced was located inside some local scope (e..g, function body).
4. It will likely miss some deprecated imports.

The migration script is designed to help apply the following import changes:

1. `langchain` to `langchain-community`

```python
from langchain.vectorstores import Chroma

# Will change to

from langchain_community.vectorstores import Chroma
```

1. `langchain-community` to appropriate partner package

```python
from langchain_community.chat_models import ChatOpenAI

# Will change to

from langchain_openai import ChatOpenAI
```

1. `langchain-community` to `langchain-core`

```python
from langchain_community.document_loaders import Blob

# Will change to

from langchain_core.document_loaders import Blob

```

1. `langchain` to `langchain-core`

```python
from langchain.schema.document import Document

# Will change to

from langchain_core.documents import Document
```

1. `langchain` to `langchain-text-splitters`

```python
from langchain.text_splitter import RecursiveCharacterTextSplitter

# Will change to

from langchain_text_splitters import RecursiveCharacterTextSplitter

```

## Install

```bash
pip install langchain-cli
langchain-cli --version # <-- Make sure the version is at least 0.0.22
```

## Usage

Given that the migration script is not perfect, you should make sure you have a backup of your code first (e.g., using version control like `git`).

You will need to run the migration script **twice** as it only applies one import replacement per run.

For example, say your code still uses `from langchain.chat_models import ChatOpenAI`:

After the first run, you’ll get: `from langchain_community.chat_models import ChatOpenAI`
After the second run, you’ll get: `from langchain_openai import ChatOpenAI`

```bash
# Run a first time
# Will replace from langchain.chat_models import ChatOpenAI
langchain-cli migrate [path to code] --diff # Preview
langchain-cli migrate [path to code] # Apply

# Run a second time to apply more import replacements
langchain-cli migrate [path to code] --diff # Preview
langchain-cli migrate [path to code] # Apply
```

## Other Options

```bash
# See help menu
langchain-cli migrate --help
# Preview Changes without applying
langchain-cli migrate --diff [path to code]
# Run on code including ipython notebooks
# Apply all import updates except for updates from langchain to langchain-core
langchain-cli migrate --disable langchain_to_core --include-ipynb [path to code]
```